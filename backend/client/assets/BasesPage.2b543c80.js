import{E as fe,x as v,d as w,o as d,aa as B,H as S,a as t,w as n,I as O,a7 as o,aE as _e,a8 as N,a5 as H,aF as G,c as b,Q as M,ae as Ce,ac as ve,ad as me,a4 as le,F as Je,a3 as Le,m as He,J as Z,k as re,aL as ie,aS as Ke,T as ee,a6 as qe,aG as ue,aH as F,aI as de,aJ as J,a9 as E,D as Ge,aK as L,aN as We,aO as Xe}from"./index.d78f815c.js";import{Q as be,a as Ze,b as Ve,c as et}from"./QTabPanels.2575ee4a.js";import{Q as tt}from"./QCheckbox.c616ffd9.js";import{_ as Ue}from"./towerSelect.9436c179.js";import{_ as at}from"./searchToolbar.a33518ca.js";import{_ as lt}from"./savePanel.faa1b35b.js";import{Q as xe,b as te}from"./QMenu.c8dbaa4e.js";import{Q as Re,a as ke}from"./QSelect.77d64708.js";import{Q as ae}from"./QTooltip.cf77d385.js";import{Q as ce}from"./QInput.72a273ff.js";import{c as Ee}from"./browser.97da8d21.js";import{u as ot}from"./use-quasar.6ef15f16.js";import{_ as nt}from"./plugin-vue_export-helper.21dcd24c.js";import"./uid.42677368.js";import"./QResizeObserver.54dc93d0.js";import"./rtl.b51694b1.js";import"./touch.70a9dd44.js";import"./selection.faaa34c1.js";import"./use-cache.b0833c75.js";import"./use-key-composition.8fe7b499.js";var oe=(i=>(i.NAME="name",i.TYPE="type",i))(oe||{}),ne=(i=>(i.TYPE="type",i.VALUE="value",i))(ne||{});const st={class:"tw-flex tw-w-full tw-items-stretch"},rt={class:"tw-flex tw-grow"},it={class:"tw-flex tw-ml-3 tw-grow"},he=fe({__name:"ruleRow",props:{id:null,targetType:null,targetValue:null,targetRegEx:{type:Boolean},conditionValue:null,conditionType:null,conditionRegEx:{type:Boolean},error:null,isNew:{type:Boolean},readOnly:{type:Boolean}},emits:["update:targetType","update:targetValue","update:targetRegEx","update:conditionType","update:conditionValue","update:conditionRegEx","update:error","addClicked","deleteClicked"],setup(i,{expose:h,emit:p}){const m=i,T=v(null),U=v(null),e=v(null),y=w({get:()=>m.targetType,set:f=>p("update:targetType",f)}),D=w({get:()=>m.targetValue,set:f=>p("update:targetValue",f)}),$=w({get:()=>m.targetRegEx,set:f=>p("update:targetRegEx",f)}),_=w({get:()=>m.conditionType,set:f=>p("update:conditionType",f)}),A=w({get:()=>m.conditionValue,set:f=>p("update:conditionValue",f)}),V=w({get:()=>m.conditionRegEx,set:f=>p("update:conditionRegEx",f)}),u=w({get:()=>m.error,set:f=>p("update:error",f)}),x=w(()=>!!(m.error&&m.targetValue&&m.conditionValue)),Y=()=>{$.value=!$.value},W=()=>{V.value=!V.value},I=()=>{m.isNew?(K(),x.value&&p("addClicked")):p("deleteClicked",m.id)},K=()=>{T.value&&U.value&&e.value&&(T.value.validate(),U.value.validate(),e.value.validate())};return h({resetValidation:()=>{var f;T.value&&U.value&&e.value&&((f=T.value)==null||f.resetValidation(),U.value.resetValidation(),e.value.resetValidation())}}),(f,g)=>(d(),B("div",st,[S("div",rt,[t(ke,{modelValue:o(y),"onUpdate:modelValue":g[0]||(g[0]=c=>G(y)?y.value=c:null),disable:i.readOnly,options:Object.values(o(oe)),borderless:"",class:"tw-mr-1",color:"secondary",dense:"","options-dense":"","popup-content-class":"shadow-black"},{selected:n(()=>[t(O,{name:o(y)==="name"?"sym_o_badge":"sym_o_data_object",size:"sm"},null,8,["name"])]),option:n(({itemProps:c,opt:j})=>[t(xe,_e({class:"tw-text-secondary"},c),{default:n(()=>[t(te,{class:"tw-flex"},{default:n(()=>[t(O,{name:j==="name"?"sym_o_badge":"sym_o_data_object",size:"sm"},null,8,["name"])]),_:2},1024),t(te,null,{default:n(()=>[t(Re,{class:"tw-min-w-[5rem]"},{default:n(()=>[N(H(j),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","disable","options"]),t(o(ce),{ref_key:"targetValueInput",ref:T,modelValue:o(D),"onUpdate:modelValue":g[1]||(g[1]=c=>G(D)?D.value=c:null),disable:i.readOnly,label:`Target ${o(y)} ${o($)?"regular expression":"text"}`,rules:[c=>!!c||`Target ${o(y)} ${o($)?"regular expression":"text"} can't be empty`],class:"tw-grow",color:"secondary",dense:"",onBlur:g[2]||(g[2]=c=>T.value.resetValidation())},{append:n(()=>[o($)?(d(),b(O,{key:0,class:"tw-cursor-pointer",name:"sym_o_function",onClick:Y},{default:n(()=>[t(ae,null,{default:n(()=>[N("Switch to regular expression")]),_:1})]),_:1})):(d(),b(O,{key:1,class:"tw-cursor-pointer",name:"sym_o_text_fields",onClick:Y},{default:n(()=>[t(ae,null,{default:n(()=>[N("Switch to text")]),_:1})]),_:1}))]),_:1},8,["modelValue","disable","label","rules"])]),S("div",it,[t(ke,{modelValue:o(_),"onUpdate:modelValue":g[3]||(g[3]=c=>G(_)?_.value=c:null),disable:i.readOnly,options:Object.values(o(ne)),borderless:"",class:"tw-mr-1",color:"secondary",dense:"","options-dense":"","popup-content-class":"shadow-black"},{selected:n(()=>[t(O,{name:o(_)==="type"?"sym_o_data_object":"sym_o_variables",size:"sm"},null,8,["name"])]),option:n(({itemProps:c,opt:j})=>[t(xe,_e({class:"tw-text-secondary"},c),{default:n(()=>[t(te,{class:"tw-flex"},{default:n(()=>[t(O,{name:j==="type"?"sym_o_data_object":"sym_o_variables",size:"sm"},null,8,["name"])]),_:2},1024),t(te,null,{default:n(()=>[t(Re,{class:"tw-min-w-[5rem]"},{default:n(()=>[N(H(j),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","disable","options"]),t(o(ce),{ref_key:"conditionValueInput",ref:U,modelValue:o(A),"onUpdate:modelValue":g[4]||(g[4]=c=>G(A)?A.value=c:null),disable:i.readOnly,label:`Condition ${o(_)} ${o(V)?"regular expression":"text"}`,rules:[c=>!!c||`Condition ${o(_)} ${o(V)?"regular expression":"text"} can't be empty`],class:"tw-grow",color:"secondary",dense:"",onBlur:g[5]||(g[5]=c=>U.value.resetValidation())},{append:n(()=>[o(V)?(d(),b(O,{key:0,class:"tw-cursor-pointer",name:"sym_o_function",onClick:W},{default:n(()=>[t(ae,null,{default:n(()=>[N("Switch to regular expression")]),_:1})]),_:1})):(d(),b(O,{key:1,class:"tw-cursor-pointer",name:"sym_o_text_fields",onClick:W},{default:n(()=>[t(ae,null,{default:n(()=>[N("Switch to text")]),_:1})]),_:1}))]),_:1},8,["modelValue","disable","label","rules"])]),t(o(ce),{ref_key:"errorInput",ref:e,modelValue:o(u),"onUpdate:modelValue":g[6]||(g[6]=c=>G(u)?u.value=c:null),disable:i.readOnly,rules:[c=>!!c||"Error message can't be empty"],class:"tw-ml-3 tw-grow",color:"secondary",dense:"",label:"Error message",onBlur:g[7]||(g[7]=c=>e.value.resetValidation())},null,8,["modelValue","disable","rules"]),t(M,{disable:i.readOnly,class:"tw-ml-2 tw-my-2",flat:"",padding:"sm",onClick:I},{default:n(()=>[t(O,{name:i.isNew?"sym_o_add":"sym_o_delete",size:"sm"},null,8,["name"])]),_:1},8,["disable"])]))}}),ut={class:"tw-flex"},Te=fe({__name:"restrictionRow",props:{baseModels:null,readOnly:{type:Boolean},isNew:{type:Boolean},modelValue:null},emits:["update:modelValue","addNewRestriction","deleteRestriction"],setup(i,{emit:h}){const p=i,m=Ce(),T=v([]),U=w(()=>[...m.getBases].splice(0,p.baseModels.length)),e=w({get:()=>p.modelValue,set:_=>h("update:modelValue",_)}),y=w(()=>U.value.some(_=>e.value[_.name])),D=()=>{p.isNew?h("addNewRestriction"):h("deleteRestriction",e.value.__id)},$=()=>{T.value.forEach(_=>{_.validate()})};return(_,A)=>(d(),B("div",ut,[S("div",{class:le([`tw-grid-cols-${i.baseModels.length}`,"tw-grid tw-w-full"])},[(d(!0),B(ve,null,me(o(U),(V,u)=>(d(),b(Ue,{key:V.name,ref_for:!0,ref_key:"allBases",ref:T,modelValue:o(e)[V.name],"onUpdate:modelValue":x=>o(e)[V.name]=x,clearable:!0,disable:i.readOnly,label:V.name,loading:!1,options:i.baseModels[u],rules:[()=>o(y)||i.isNew||"At least one model has to be chosen"],class:"tw-mr-2",displayAsEmpty:"ANY",onBlur:$},null,8,["modelValue","onUpdate:modelValue","disable","label","options","rules"]))),128))],2),t(M,{disable:i.readOnly||i.isNew&&!o(y),class:"tw-mt-2 tw-mb-3 tw-max-w-[2rem] tw-place-self-end",flat:"",padding:"sm",onClick:D},{default:n(()=>[t(O,{name:i.isNew?"sym_o_add":"sym_o_delete",size:"sm"},null,8,["name"])]),_:1},8,["disable"])]))}});const $e=i=>(We("data-v-1c0cce62"),i=i(),Xe(),i),dt={class:"text-h6"},ct=$e(()=>S("div",{class:"text-h6"},"Remove rule",-1)),vt=$e(()=>S("div",{class:"text-h6"},"Remove restriction",-1)),mt={class:"tw-flex tw-justify-center tw-text-secondary tw-py-3"},ft={key:0,class:"tw-w-full tw-flex tw-justify-center tw-justify-self-center tw-self-center tw-items-center"},gt={class:"tw-text-lg tw-tracking-wide tw-italic tw-text-gray-400"},pt={key:0,class:"tw-text-center tw-text-xs tw-text-gray-500"},yt={key:0,class:"tw-w-full tw-flex tw-justify-center tw-justify-self-center tw-self-center tw-items-center"},wt={class:"tw-text-lg tw-tracking-wide tw-italic tw-text-gray-400"},_t={key:0,class:"tw-text-center tw-text-xs tw-text-gray-500"},bt={key:0},Vt=fe({__name:"BasesPage",setup(i){const h=qe(),p=Ce(),m=Je(),T=ot(),U=Le(),e=v(null),y=v(""),D=v([]),$=v([]),_=v(!1),A=v([]),V=v([]),u=v({targetValue:"",targetType:oe.NAME,targetRegEx:!1,conditionValue:"",conditionType:ne.TYPE,conditionRegEx:!1,error:""}),x=v(!1),Y=v(""),W=v(""),I=v("rules"),K=v(null),q=v({}),f=v(!1),g=v(""),c=v(!1),j=v(""),se=v(!1);He(async()=>{await X()});const Be=w(()=>{const s=p.getBases.find(a=>a.name===h.params.base);return s?s.icon:null}),ge=w(()=>Y.value?A.value.some(a=>a.name===Y.value)?null:"sym_o_add":e.value?"sym_o_delete":null),pe=w(()=>{var a,l,r,Q;return e.value?!e.value._id||D.value.length!==((a=e.value)==null?void 0:a.rules.length)||$.value.length!==((l=e.value)==null?void 0:l.restrictions.length)||_.value!==((r=e.value)==null?void 0:r.options.hasRestrictions)||e.value.rules.some(R=>!D.value.some(k=>k._id===R._id&&k.targetRegEx===R.targetRegEx&&k.targetType===R.targetType&&k.targetValue===R.targetValue&&k.conditionRegEx===R.conditionRegEx&&k.conditionType===R.conditionType&&k.conditionValue===R.conditionValue&&k.error===R.error))?!0:(Q=e.value)==null?void 0:Q.restrictions.some(R=>{const k=$.value.find(z=>z.__id===R.__id);if(k){const z=Object.keys(R),P=Object.keys(k);if(z.length!==P.length)return!0;for(const we of z)if(R[we]!==k[we])return!0;return!1}return!0}):!1}),Oe=w(()=>e.value&&e.value.options.hasRestrictions&&e.value.restrictions.length>0?!e.value.restrictions.some(s=>Object.keys(s).some(a=>!!s[a])):!1),C=w(()=>{if(m.getUsername==="admin"||m.getRoles.includes("admin"))return!0;if(e.value){const s=`configurationModel.${e.value.base}.${e.value.name}`;return m.getRoles.includes("configurationModel.modify")&&(m.getRoles.includes(`${s}.modify`)||!m.getRoles.includes(`${s}.view`))?!0:m.getRoles.includes("constantVariable.modify")||m.getRoles.includes("admin")}return!1}),Ie=w(()=>!!(e.value&&e.value.name&&e.value._id)||!e.value&&y.value),X=async()=>{x.value=!0;const s={order:"name ASC",where:{base:h.params.base}},a=await Z.get(`/configurationModels?filter=${JSON.stringify(s,void 0,"")}`);a.status===200&&(A.value=a.data),await Se(),x.value=!1},Se=async()=>{V.value=[];for(let s of p.getBases){if(s.name==h.params.base)break;const a={order:"name ASC",where:{base:s.name}},l=await Z.get(`/configurationModels?filter=${JSON.stringify(a,void 0,"")}`);if(l.status===200){const r=[];l.data.forEach(Q=>{r.push(Q.name)}),V.value.push(r)}}},Ne=s=>{Y.value=s},De=()=>{!e.value||(e.value.rules||(e.value.rules=[]),e.value.rules.push({_id:Ee({length:10}),error:u.value.error,conditionRegEx:u.value.conditionRegEx,conditionType:u.value.conditionType,conditionValue:u.value.conditionValue,targetType:u.value.targetType,targetRegEx:u.value.targetRegEx,targetValue:u.value.targetValue}),u.value={targetValue:"",targetType:oe.NAME,targetRegEx:!1,conditionValue:"",conditionType:ne.TYPE,conditionRegEx:!1,error:""},Ge(()=>{K.value&&K.value.resetValidation()}))},Qe=s=>{g.value=s,f.value=!0},Me=()=>{e.value&&e.value.rules&&(e.value.rules=e.value.rules.filter(s=>s._id!==g.value))},Ae=()=>{if(e.value){e.value.restrictions||(e.value.restrictions=[]);const s={...q.value};s.__id=Ee({length:10}),e.value.restrictions.push(s),q.value={}}},je=s=>{j.value=s,c.value=!0},Pe=()=>{var s;(s=e.value)!=null&&s.restrictions&&(e.value.restrictions=e.value.restrictions.filter(a=>a.__id!==j.value))},Ye=async()=>{var s,a,l,r,Q,R,k;if(e.value){x.value=!0;const z={rules:(s=e.value)==null?void 0:s.rules,name:e.value.name,base:(a=e.value)==null?void 0:a.base,options:(l=e.value)==null?void 0:l.options,restrictions:(r=e.value)==null?void 0:r.restrictions,_id:(Q=e.value)==null?void 0:Q._id};try{const P=await Z.put("/configurationModels",z);P.status===200&&(await X(),ye(P.data),e.value._id=P.data._id,T.notify({color:"positive",position:"top",textColor:"secondary",message:`${e.value.name} ${e.value.base} saved successfully`}),e.value=P.data)}catch{T.notify({color:"negative",position:"top",textColor:"secondary",icon:"sym_o_error",message:`Error saving ${(R=e==null?void 0:e.value)==null?void 0:R.name} ${(k=e==null?void 0:e.value)==null?void 0:k.base}`})}x.value=!1}},ye=s=>{D.value=[],$.value=[],_.value=s.options.hasRestrictions,s.rules.forEach(a=>{D.value.push({...a})}),s.restrictions.forEach(a=>{$.value.push({...a})})},ze=()=>{e.value&&!y.value?se.value=!0:y.value&&(e.value={name:y.value,base:h.params.base,restrictions:[],options:{hasRestrictions:!1},rules:[]})},Fe=async()=>{try{if(e.value){const s=e.value._id;e.value=null,await Z.delete(`/configurationModels/${s}`),await X(),T.notify({color:"positive",position:"top",textColor:"secondary",message:"Model removed successfully"})}}catch{T.notify({color:"negative",position:"top",textColor:"secondary",icon:"sym_o_error",message:"Error deleting model"})}};return re(()=>h.path,async()=>{e.value=null,I.value="rules",await X()}),re(()=>e.value,s=>{s&&ye(s)}),re(pe,s=>{s&&!x.value?U.preventNavigation():U.allowNavigation()}),(s,a)=>(d(),B("div",null,[t(ie,{modelValue:se.value,"onUpdate:modelValue":a[0]||(a[0]=l=>se.value=l)},{default:n(()=>[t(ue,{class:"tw-min-w-[30%]"},{default:n(()=>[t(F,{class:"tw-bg-negative"},{default:n(()=>{var l;return[S("div",dt," Delete "+H((l=e.value)==null?void 0:l.name)+" "+H(o(h).params.base),1)]}),_:1}),t(F,null,{default:n(()=>{var l;return[N(" Are you sure you want to remove "+H((l=e.value)==null?void 0:l.name)+" "+H(o(h).params.base)+"? ",1)]}),_:1}),t(de,{align:"right"},{default:n(()=>[J(t(M,{color:"secondary",flat:"",label:"Cancel"},null,512),[[L]]),J(t(M,{color:"negative",flat:"",label:"Yes",onClick:Fe},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ie,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=l=>f.value=l)},{default:n(()=>[t(ue,{class:"tw-min-w-[30%]"},{default:n(()=>[t(F,{class:"tw-bg-negative"},{default:n(()=>[ct]),_:1}),t(F,null,{default:n(()=>[N(" Are you sure you want to remove this rule? ")]),_:1}),t(de,{align:"right"},{default:n(()=>[J(t(M,{color:"secondary",flat:"",label:"Cancel"},null,512),[[L]]),J(t(M,{color:"negative",flat:"",label:"Yes",onClick:Me},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ie,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=l=>c.value=l)},{default:n(()=>[t(ue,{class:"tw-min-w-[30%]"},{default:n(()=>[t(F,{class:"tw-bg-negative"},{default:n(()=>[vt]),_:1}),t(F,null,{default:n(()=>[N(" Are you sure you want to remove this restriction? ")]),_:1}),t(de,{align:"right"},{default:n(()=>[J(t(M,{color:"secondary",flat:"",label:"Cancel"},null,512),[[L]]),J(t(M,{color:"negative",flat:"",label:"Yes",onClick:Pe},null,512),[[L]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S("div",mt,[t(Ue,{modelValue:e.value,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value=l),filter:y.value,"onUpdate:filter":a[4]||(a[4]=l=>y.value=l),clearable:!1,disable:!1,label:`Choose or create new ${o(h).params.base}`,loading:x.value,options:A.value,class:"tw-w-[33.3%]","option-label":"name",onInputValue:Ne},Ke({prepend:n(()=>[t(O,{name:o(Be)},null,8,["name"])]),_:2},[o(C)?{name:"after",fn:n(()=>[o(ge)||y.value?(d(),b(M,{key:0,disable:!o(Ie),flat:"",padding:"sm",onClick:ze},{default:n(()=>[t(O,{name:o(ge)},null,8,["name"])]),_:1},8,["disable"])):E("",!0)]),key:"0"}:void 0]),1032,["modelValue","filter","label","loading","options"])]),t(ee,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:n(()=>[e.value?(d(),b(at,{key:0,"export-enabled":!1,filter:W.value,"import-enabled":!1,showDiffEnabled:!1,title:`${e.value.name} ${e.value.base}`,class:"tw-mt-3"},null,8,["filter","title"])):E("",!0)]),_:1}),t(ee,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:n(()=>[e.value?(d(),b(Ze,{key:0,modelValue:I.value,"onUpdate:modelValue":a[5]||(a[5]=l=>I.value=l),"active-color":"secondary",align:"left",animated:"",class:"tw-mt-3 tw-text-gray-500",dense:"","indicator-color":"secondary","keep-alive":"","narrow-indicator":""},{default:n(()=>{var l;return[t(be,{class:"tw-rounded",label:"Rules",name:"rules"}),((l=e.value)==null?void 0:l.base)!==o(p).getBases[0].name?(d(),b(be,{key:0,class:"tw-rounded",label:"Restrictions",name:"restrictions"})):E("",!0)]}),_:1},8,["modelValue"])):E("",!0)]),_:1}),t(ee,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:n(()=>[e.value?(d(),b(et,{key:0,modelValue:I.value,"onUpdate:modelValue":a[7]||(a[7]=l=>I.value=l),class:le([o(C)?"tower-min-height":"tower-min-height-readOnly","tw-bg-darkPage"]),animated:""},{default:n(()=>[t(Ve,{name:"rules"},{default:n(()=>[S("div",{class:le([{"tower-min-panel-height":o(C),"tower-min-panel-height-readOnly":!o(C),"tw-justify-center":e.value.rules.length===0&&!x.value},"tw-flex tw-flex-col"])},[(d(!0),B(ve,null,me(e.value.rules,l=>(d(),b(he,{id:l._id,key:l._id,"condition-reg-ex":l.conditionRegEx,"onUpdate:conditionRegEx":r=>l.conditionRegEx=r,"condition-type":l.conditionType,"onUpdate:conditionType":r=>l.conditionType=r,"condition-value":l.conditionValue,"onUpdate:conditionValue":r=>l.conditionValue=r,error:l.error,"onUpdate:error":r=>l.error=r,"target-reg-ex":l.targetRegEx,"onUpdate:targetRegEx":r=>l.targetRegEx=r,"target-type":l.targetType,"onUpdate:targetType":r=>l.targetType=r,"target-value":l.targetValue,"onUpdate:targetValue":r=>l.targetValue=r,"is-new":!1,"read-only":!o(C),onDeleteClicked:Qe},null,8,["id","condition-reg-ex","onUpdate:conditionRegEx","condition-type","onUpdate:conditionType","condition-value","onUpdate:conditionValue","error","onUpdate:error","target-reg-ex","onUpdate:targetRegEx","target-type","onUpdate:targetType","target-value","onUpdate:targetValue","read-only"]))),128)),e.value.rules.length===0&&!x.value?(d(),B("div",ft,[S("div",gt,[N(" There aren't any rules in this model "),o(C)?(d(),B("div",pt," You can create one using panel below ")):E("",!0)])])):E("",!0)],2)]),_:1}),t(Ve,{name:"restrictions"},{default:n(()=>[S("div",null,[I.value==="restrictions"?(d(),b(tt,{key:0,modelValue:e.value.options.hasRestrictions,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.options.hasRestrictions=l),disable:!o(C),label:"Enable restrictions"},null,8,["modelValue","disable"])):E("",!0),I.value==="restrictions"?(d(),B("div",{key:1,class:le([{"tw-justify-center":e.value.restrictions.length===0&&!x.value,"tower-min-restriction-panel-height":o(C),"tower-min-restriction-panel-height-readOnly":!o(C)},"tw-flex tw-flex-col"])},[(d(!0),B(ve,null,me(e.value.restrictions,(l,r)=>(d(),b(Te,{key:l.__id,modelValue:e.value.restrictions[r],"onUpdate:modelValue":Q=>e.value.restrictions[r]=Q,"base-models":V.value,"is-new":!1,"read-only":!e.value.options.hasRestrictions||!o(C),onDeleteRestriction:je},null,8,["modelValue","onUpdate:modelValue","base-models","read-only"]))),128)),e.value.restrictions.length===0&&!x.value?(d(),B("div",yt,[S("div",wt,[N(" There aren't any restrictions in this model "),o(C)?(d(),B("div",_t," You can create one using panel below ")):E("",!0)])])):E("",!0)],2)):E("",!0)])]),_:1})]),_:1},8,["modelValue","class"])):E("",!0)]),_:1}),t(ee,{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:n(()=>{var l;return[e.value?(d(),B("div",bt,[I.value==="rules"&&o(C)?(d(),b(he,{key:0,ref_key:"newRuleRow",ref:K,"condition-reg-ex":u.value.conditionRegEx,"onUpdate:conditionRegEx":a[8]||(a[8]=r=>u.value.conditionRegEx=r),"condition-type":u.value.conditionType,"onUpdate:conditionType":a[9]||(a[9]=r=>u.value.conditionType=r),"condition-value":u.value.conditionValue,"onUpdate:conditionValue":a[10]||(a[10]=r=>u.value.conditionValue=r),error:u.value.error,"onUpdate:error":a[11]||(a[11]=r=>u.value.error=r),"target-reg-ex":u.value.targetRegEx,"onUpdate:targetRegEx":a[12]||(a[12]=r=>u.value.targetRegEx=r),"target-type":u.value.targetType,"onUpdate:targetType":a[13]||(a[13]=r=>u.value.targetType=r),"target-value":u.value.targetValue,"onUpdate:targetValue":a[14]||(a[14]=r=>u.value.targetValue=r),"is-new":!0,onAddClicked:De},null,8,["condition-reg-ex","condition-type","condition-value","error","target-reg-ex","target-type","target-value"])):E("",!0),I.value==="restrictions"&&o(C)?(d(),b(Te,{key:1,modelValue:q.value,"onUpdate:modelValue":a[15]||(a[15]=r=>q.value=r),"base-models":V.value,"is-new":!0,"read-only":!((l=e.value)!=null&&l.options.hasRestrictions),onAddNewRestriction:Ae},null,8,["modelValue","base-models","read-only"])):E("",!0),o(C)?(d(),b(lt,{key:2,"has-errors":o(Oe),loading:x.value,"save-enabled":o(pe),class:"tw-mt-1",onSaveClicked:Ye},null,8,["has-errors","loading","save-enabled"])):E("",!0)])):E("",!0)]}),_:1})]))}});var Yt=nt(Vt,[["__scopeId","data-v-1c0cce62"]]);export{Yt as default};
