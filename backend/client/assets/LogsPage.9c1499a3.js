import{b as z,d as v,h as i,f as K,j as G,au as Vt,I as fe,$ as Re,a0 as Te,x as F,k as N,aM as lt,m as $e,M as Ft,L as Dt,n as at,s as Lt,t as Ae,C as nt,aY as Et,aZ as Qt,bh as Mt,bi as He,bj as pe,b7 as ze,b8 as Nt,D as ot,bk as jt,U as Y,Q as J,E as At,J as Ue,aa as H,a as O,w as $,aL as Ie,a4 as Ht,a7 as We,o as L,aG as Je,aH as ue,a8 as Ke,a5 as ce,aI as Ge,aJ as Xe,c as W,ac as zt,ad as Ut,H as ee,aK as Ye,aN as It,aO as Wt}from"./index.d78f815c.js";import{Q as Jt}from"./QInput.72a273ff.js";import{Q as Kt}from"./QSeparator.ac17e27e.js";import{Q as Gt}from"./QList.7f34605a.js";import{u as Xt,d as Yt,e as rt,a as Zt}from"./QSelect.77d64708.js";import{Q as Be}from"./QCheckbox.c616ffd9.js";import{u as el}from"./use-quasar.6ef15f16.js";import{_ as tl}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.8fe7b499.js";import"./uid.42677368.js";import"./QMenu.c8dbaa4e.js";import"./selection.faaa34c1.js";import"./rtl.b51694b1.js";var de=z({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const o=G(),d=v(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return i("td",{class:d.value},K(l.default));const r=o.vnode.key,f=(e.props.colsMap!==void 0?e.props.colsMap[r]:null)||e.props.col;if(f===void 0)return;const{row:s}=e.props;return i("td",{class:d.value+f.__tdClass(s),style:f.__tdStyle(s)},K(l.default))}}}),ll=z({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const o=v(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>i("tr",{class:o.value},K(l.default))}}),al=z({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:o}){const d=G(),{proxy:{$q:r}}=d,f=s=>{o("click",s)};return()=>{if(e.props===void 0)return i("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:f},K(l.default));let s,c;const n=d.vnode.key;if(n){if(s=e.props.colsMap[n],s===void 0)return}else s=e.props.col;if(s.sortable===!0){const a=s.align==="right"?"unshift":"push";c=Vt(l.default,[]),c[a](i(fe,{class:s.__iconClass,name:r.iconSet.table.arrowUp}))}else c=K(l.default);const y={class:s.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:s.headerStyle,onClick:a=>{s.sortable===!0&&e.props.sort(s),f(a)}};return i("th",y,c)}}});const nl=["horizontal","vertical","cell","none"];var ol=z({name:"QMarkupTable",props:{...Re,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>nl.includes(e)}},setup(e,{slots:l}){const o=G(),d=Te(e,o.proxy.$q),r=v(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(d.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>i("div",{class:r.value},[i("table",{class:"q-table"},K(l.default))])}});function it(e,l){return i("div",e,[i("table",{class:"q-table"},l)])}const rl={list:Gt,table:ol},il=["list","table","__qtable"];var sl=z({name:"QVirtualScroll",props:{...Xt,type:{type:String,default:"list",validator:e=>il.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:l,attrs:o}){let d;const r=F(null),f=v(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:s,localResetVirtualScroll:c,padVirtualScroll:n,onVirtualScrollEvt:y}=Yt({virtualScrollLength:f,getVirtualScrollTarget:p,getVirtualScrollEl:x}),a=v(()=>{if(f.value===0)return[];const P=(b,q)=>({index:s.value.from+q,item:b});return e.itemsFn===void 0?e.items.slice(s.value.from,s.value.to).map(P):e.itemsFn(s.value.from,s.value.to-s.value.from).map(P)}),g=v(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),k=v(()=>e.scrollTarget!==void 0?{}:{tabindex:0});N(f,()=>{c()}),N(()=>e.scrollTarget,()=>{S(),C()});function x(){return r.value.$el||r.value}function p(){return d}function C(){d=Lt(x(),e.scrollTarget),d.addEventListener("scroll",y,Ae.passive)}function S(){d!==void 0&&(d.removeEventListener("scroll",y,Ae.passive),d=void 0)}function h(){let P=n(e.type==="list"?"div":"tbody",a.value.map(l.default));return l.before!==void 0&&(P=l.before().concat(P)),nt(l.after,P)}return lt(()=>{c()}),$e(()=>{C()}),Ft(()=>{C()}),Dt(()=>{S()}),at(()=>{S()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?it({ref:r,class:"q-table__middle "+g.value},h()):i(rl[e.type],{...o,ref:r,class:[o.class,g.value],...k.value},h)}}});const ul={xs:2,sm:4,md:6,lg:10,xl:14};function Ze(e,l,o){return{transform:l===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var cl=z({name:"QLinearProgress",props:{...Re,...Et,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:o}=G(),d=Te(e,o.$q),r=Qt(e,ul),f=v(()=>e.indeterminate===!0||e.query===!0),s=v(()=>e.reverse!==e.query),c=v(()=>({...r.value!==null?r.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),n=v(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=v(()=>Ze(e.buffer!==void 0?e.buffer:1,s.value,o.$q)),a=v(()=>`with${e.instantFeedback===!0?"out":""}-transition`),g=v(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${a.value} q-linear-progress__track--${d.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),k=v(()=>Ze(f.value===!0?1:e.value,s.value,o.$q)),x=v(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${a.value} q-linear-progress__model--${f.value===!0?"in":""}determinate`),p=v(()=>({width:`${e.value*100}%`})),C=v(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${a.value}`);return()=>{const S=[i("div",{class:g.value,style:y.value}),i("div",{class:x.value,style:k.value})];return e.stripe===!0&&f.value===!1&&S.push(i("div",{class:C.value,style:p.value})),i("div",{class:n.value,style:c.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},nt(l.default,S))}}});let Z=0;const dl={fullscreen:Boolean,noRouteFullscreenExit:Boolean},vl=["update:fullscreen","fullscreen"];function fl(){const e=G(),{props:l,emit:o,proxy:d}=e;let r,f,s;const c=F(!1);Mt(e)===!0&&N(()=>d.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&a()}),N(()=>l.fullscreen,g=>{c.value!==g&&n()}),N(c,g=>{o("update:fullscreen",g),o("fullscreen",g)});function n(){c.value===!0?a():y()}function y(){c.value!==!0&&(c.value=!0,s=d.$el.parentNode,s.replaceChild(f,d.$el),document.body.appendChild(d.$el),Z++,Z===1&&document.body.classList.add("q-body--fullscreen-mixin"),r={handler:a},He.add(r))}function a(){c.value===!0&&(r!==void 0&&(He.remove(r),r=void 0),s.replaceChild(d.$el,f),c.value=!1,Z=Math.max(0,Z-1),Z===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),d.$el.scrollIntoView!==void 0&&setTimeout(()=>{d.$el.scrollIntoView()})))}return lt(()=>{f=document.createElement("span")}),$e(()=>{l.fullscreen===!0&&y()}),at(a),Object.assign(d,{toggleFullscreen:n,setFullscreen:y,exitFullscreen:a}),{inFullscreen:c,toggleFullscreen:n}}function gl(e,l){return new Date(e)-new Date(l)}const ml={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function bl(e,l,o,d){const r=v(()=>{const{sortBy:c}=l.value;return c&&o.value.find(n=>n.name===c)||null}),f=v(()=>e.sortMethod!==void 0?e.sortMethod:(c,n,y)=>{const a=o.value.find(x=>x.name===n);if(a===void 0||a.field===void 0)return c;const g=y===!0?-1:1,k=typeof a.field=="function"?x=>a.field(x):x=>x[a.field];return c.sort((x,p)=>{let C=k(x),S=k(p);return C==null?-1*g:S==null?1*g:a.sort!==void 0?a.sort(C,S,x,p)*g:pe(C)===!0&&pe(S)===!0?(C-S)*g:ze(C)===!0&&ze(S)===!0?gl(C,S)*g:typeof C=="boolean"&&typeof S=="boolean"?(C-S)*g:([C,S]=[C,S].map(h=>(h+"").toLocaleString().toLowerCase()),C<S?-1*g:C===S?0:g)})});function s(c){let n=e.columnSortOrder;if(Nt(c)===!0)c.sortOrder&&(n=c.sortOrder),c=c.name;else{const g=o.value.find(k=>k.name===c);g!==void 0&&g.sortOrder&&(n=g.sortOrder)}let{sortBy:y,descending:a}=l.value;y!==c?(y=c,a=n==="da"):e.binaryStateSort===!0?a=!a:a===!0?n==="ad"?y=null:a=!1:n==="ad"?a=!0:y=null,d({sortBy:y,descending:a,page:1})}return{columnToSort:r,computedSortMethod:f,sort:s}}const yl={filter:[String,Object],filterMethod:Function};function wl(e,l){const o=v(()=>e.filterMethod!==void 0?e.filterMethod:(d,r,f,s)=>{const c=r?r.toLowerCase():"";return d.filter(n=>f.some(y=>{const a=s(y,n)+"";return(a==="undefined"||a==="null"?"":a.toLowerCase()).indexOf(c)!==-1}))});return N(()=>e.filter,()=>{ot(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function hl(e,l){for(const o in l)if(l[o]!==e[o])return!1;return!0}function et(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Sl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function _l(e,l){const{props:o,emit:d}=e,r=F(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length>0?o.rowsPerPageOptions[0]:5},o.pagination)),f=v(()=>{const a=o["onUpdate:pagination"]!==void 0?{...r.value,...o.pagination}:r.value;return et(a)}),s=v(()=>f.value.rowsNumber!==void 0);function c(a){n({pagination:a,filter:o.filter})}function n(a={}){ot(()=>{d("request",{pagination:a.pagination||f.value,filter:a.filter||o.filter,getCellValue:l})})}function y(a,g){const k=et({...f.value,...a});if(hl(f.value,k)===!0){s.value===!0&&g===!0&&c(k);return}if(s.value===!0){c(k);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?d("update:pagination",k):r.value=k}return{innerPagination:r,computedPagination:f,isServerSide:s,requestServerInteraction:n,setPagination:y}}function ql(e,l,o,d,r,f){const{props:s,emit:c,proxy:{$q:n}}=e,y=v(()=>d.value===!0?o.value.rowsNumber||0:f.value),a=v(()=>{const{page:q,rowsPerPage:B}=o.value;return(q-1)*B}),g=v(()=>{const{page:q,rowsPerPage:B}=o.value;return q*B}),k=v(()=>o.value.page===1),x=v(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(y.value/o.value.rowsPerPage))),p=v(()=>g.value===0?!0:o.value.page>=x.value),C=v(()=>(s.rowsPerPageOptions.includes(l.value.rowsPerPage)?s.rowsPerPageOptions:[l.value.rowsPerPage].concat(s.rowsPerPageOptions)).map(B=>({label:B===0?n.lang.table.allRows:""+B,value:B})));N(x,(q,B)=>{if(q===B)return;const D=o.value.page;q&&!D?r({page:1}):q<D&&r({page:q})});function S(){r({page:1})}function h(){const{page:q}=o.value;q>1&&r({page:q-1})}function P(){const{page:q,rowsPerPage:B}=o.value;g.value>0&&q*B<y.value&&r({page:q+1})}function b(){r({page:x.value})}return s["onUpdate:pagination"]!==void 0&&c("update:pagination",{...o.value}),{firstRowIndex:a,lastRowIndex:g,isFirstPage:k,isLastPage:p,pagesNumber:x,computedRowsPerPageOptions:C,computedRowsNumber:y,firstPage:S,prevPage:h,nextPage:P,lastPage:b}}const Cl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Pl=["update:selected","selection"];function kl(e,l,o,d){const r=v(()=>{const p={};return e.selected.map(d.value).forEach(C=>{p[C]=!0}),p}),f=v(()=>e.selection!=="none"),s=v(()=>e.selection==="single"),c=v(()=>e.selection==="multiple"),n=v(()=>o.value.length>0&&o.value.every(p=>r.value[d.value(p)]===!0)),y=v(()=>n.value!==!0&&o.value.some(p=>r.value[d.value(p)]===!0)),a=v(()=>e.selected.length);function g(p){return r.value[p]===!0}function k(){l("update:selected",[])}function x(p,C,S,h){l("selection",{rows:C,added:S,keys:p,evt:h});const P=s.value===!0?S===!0?C:[]:S===!0?e.selected.concat(C):e.selected.filter(b=>p.includes(d.value(b))===!1);l("update:selected",P)}return{hasSelectionMode:f,singleSelection:s,multipleSelection:c,allRowsSelected:n,someRowsSelected:y,rowsSelectedNumber:a,isRowSelected:g,clearSelection:k,updateSelection:x}}function tt(e){return Array.isArray(e)?e.slice():[]}const xl={expanded:Array},Bl=["update:expanded"];function pl(e,l){const o=F(tt(e.expanded));N(()=>e.expanded,s=>{o.value=tt(s)});function d(s){return o.value.includes(s)}function r(s){e.expanded!==void 0?l("update:expanded",s):o.value=s}function f(s,c){const n=o.value.slice(),y=n.indexOf(s);c===!0?y===-1&&(n.push(s),r(n)):y!==-1&&(n.splice(y,1),r(n))}return{isRowExpanded:d,setExpanded:r,updateExpanded:f}}const Rl={visibleColumns:Array};function Tl(e,l,o){const d=v(()=>{if(e.columns!==void 0)return e.columns;const c=e.rows[0];return c!==void 0?Object.keys(c).map(n=>({name:n,label:n.toUpperCase(),field:n,align:pe(c[n])?"right":"left",sortable:!0})):[]}),r=v(()=>{const{sortBy:c,descending:n}=l.value;return(e.visibleColumns!==void 0?d.value.filter(a=>a.required===!0||e.visibleColumns.includes(a.name)===!0):d.value).map(a=>{const g=a.align||"right",k=`text-${g}`;return{...a,align:g,__iconClass:`q-table__sort-icon q-table__sort-icon--${g}`,__thClass:k+(a.headerClasses!==void 0?" "+a.headerClasses:"")+(a.sortable===!0?" sortable":"")+(a.name===c?` sorted ${n===!0?"sort-desc":""}`:""),__tdStyle:a.style!==void 0?typeof a.style!="function"?()=>a.style:a.style:()=>null,__tdClass:a.classes!==void 0?typeof a.classes!="function"?()=>k+" "+a.classes:x=>k+" "+a.classes(x):()=>k}})}),f=v(()=>{const c={};return r.value.forEach(n=>{c[n.name]=n}),c}),s=v(()=>e.tableColspan!==void 0?e.tableColspan:r.value.length+(o.value===!0?1:0));return{colList:d,computedCols:r,computedColsMap:f,computedColspan:s}}const ve="q-table__bottom row items-center",st={};rt.forEach(e=>{st[e]={}});var $l=z({name:"QTable",props:{rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...st,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Re,...dl,...Rl,...yl,...Sl,...xl,...Cl,...ml},emits:["request","virtualScroll",...vl,...Bl,...Pl],setup(e,{slots:l,emit:o}){const d=G(),{proxy:{$q:r}}=d,f=Te(e,r),{inFullscreen:s,toggleFullscreen:c}=fl(),n=v(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),y=F(null),a=F(null),g=v(()=>e.grid!==!0&&e.virtualScroll===!0),k=v(()=>" q-table__card"+(f.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),x=v(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":k.value)+(f.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(s.value===!0?" fullscreen scroll":"")),p=v(()=>x.value+(e.loading===!0?" q-table--loading":""));N(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+x.value,()=>{g.value===!0&&a.value!==null&&a.value.reset()});const{innerPagination:C,computedPagination:S,isServerSide:h,requestServerInteraction:P,setPagination:b}=_l(d,U),{computedFilterMethod:q}=wl(e,b),{isRowExpanded:B,setExpanded:D,updateExpanded:me}=pl(e,o),M=v(()=>{let t=e.rows;if(h.value===!0||t.length===0)return t;const{sortBy:u,descending:m}=S.value;return e.filter&&(t=q.value(t,e.filter,j.value,U)),ft.value!==null&&(t=gt.value(e.rows===t?t.slice():t,u,m)),t}),X=v(()=>M.value.length),Q=v(()=>{let t=M.value;if(h.value===!0)return t;const{rowsPerPage:u}=S.value;return u!==0&&(le.value===0&&e.rows!==t?t.length>ae.value&&(t=t.slice(0,ae.value)):t=t.slice(le.value,ae.value)),t}),{hasSelectionMode:E,singleSelection:ut,multipleSelection:Oe,allRowsSelected:ct,someRowsSelected:Ve,rowsSelectedNumber:be,isRowSelected:ye,clearSelection:dt,updateSelection:te}=kl(e,o,Q,n),{colList:vt,computedCols:j,computedColsMap:Fe,computedColspan:De}=Tl(e,S,E),{columnToSort:ft,computedSortMethod:gt,sort:we}=bl(e,S,vt,b),{firstRowIndex:le,lastRowIndex:ae,isFirstPage:he,isLastPage:Se,pagesNumber:ne,computedRowsPerPageOptions:mt,computedRowsNumber:oe,firstPage:_e,prevPage:qe,nextPage:Ce,lastPage:Pe}=ql(d,C,S,h,b,X),bt=v(()=>Q.value.length===0),yt=v(()=>{const t={};return rt.forEach(u=>{t[u]=e[u]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function wt(){g.value===!0&&a.value.reset()}function ht(){if(e.grid===!0)return $t();const t=e.hideHeader!==!0?Ne:null;if(g.value===!0){const m=l["top-row"],w=l["bottom-row"],_={default:T=>Ee(T.item,l.body,T.index)};if(m!==void 0){const T=i("tbody",m({cols:j.value}));_.before=t===null?()=>T:()=>[t()].concat(T)}else t!==null&&(_.before=t);return w!==void 0&&(_.after=()=>i("tbody",w({cols:j.value}))),i(sl,{ref:a,class:e.tableClass,style:e.tableStyle,...yt.value,scrollTarget:e.virtualScrollTarget,items:Q.value,type:"__qtable",tableColspan:De.value,onVirtualScroll:_t},_)}const u=[qt()];return t!==null&&u.unshift(t()),it({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},u)}function St(t,u){if(a.value!==null){a.value.scrollTo(t,u);return}t=parseInt(t,10);const m=y.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(m!==null){const w=y.value.querySelector(".q-table__middle.scroll"),_=m.offsetTop-e.virtualScrollStickySizeStart,T=_<w.scrollTop?"decrease":"increase";w.scrollTop=_,o("virtualScroll",{index:t,from:0,to:C.value.rowsPerPage-1,direction:T})}}function _t(t){o("virtualScroll",t)}function Le(){return[i(cl,{class:"q-table__linear-progress",color:e.color,dark:f.value,indeterminate:!0,trackColor:"transparent"})]}function Ee(t,u,m){const w=n.value(t),_=ye(w);if(u!==void 0)return u(Qe({key:w,row:t,pageIndex:m,__trClass:_?"selected":""}));const T=l["body-cell"],R=j.value.map(V=>{const ie=l[`body-cell-${V.name}`],se=ie!==void 0?ie:T;return se!==void 0?se(Ct({key:w,row:t,pageIndex:m,col:V})):i("td",{class:V.__tdClass(t),style:V.__tdStyle(t)},U(V,t))});if(E.value===!0){const V=l["body-selection"],ie=V!==void 0?V(Pt({key:w,row:t,pageIndex:m})):[i(Be,{modelValue:_,color:e.color,dark:f.value,dense:e.dense,"onUpdate:modelValue":(se,Ot)=>{te([w],[t],se,Ot)}})];R.unshift(i("td",{class:"q-table--col-auto-width"},ie))}const A={key:w,class:{selected:_}};return e.onRowClick!==void 0&&(A.class["cursor-pointer"]=!0,A.onClick=V=>{o("RowClick",V,t,m)}),e.onRowDblclick!==void 0&&(A.class["cursor-pointer"]=!0,A.onDblclick=V=>{o("RowDblclick",V,t,m)}),e.onRowContextmenu!==void 0&&(A.class["cursor-pointer"]=!0,A.onContextmenu=V=>{o("RowContextmenu",V,t,m)}),i("tr",A,R)}function qt(){const t=l.body,u=l["top-row"],m=l["bottom-row"];let w=Q.value.map((_,T)=>Ee(_,t,T));return u!==void 0&&(w=u({cols:j.value}).concat(w)),m!==void 0&&(w=w.concat(m({cols:j.value}))),i("tbody",w)}function Qe(t){return ke(t),t.cols=t.cols.map(u=>Y({...u},"value",()=>U(u,t.row))),t}function Ct(t){return ke(t),Y(t,"value",()=>U(t.col,t.row)),t}function Pt(t){return ke(t),t}function ke(t){Object.assign(t,{cols:j.value,colsMap:Fe.value,sort:we,rowIndex:le.value+t.pageIndex,color:e.color,dark:f.value,dense:e.dense}),E.value===!0&&Y(t,"selected",()=>ye(t.key),(u,m)=>{te([t.key],[t.row],u,m)}),Y(t,"expand",()=>B(t.key),u=>{me(t.key,u)})}function U(t,u){const m=typeof t.field=="function"?t.field(u):u[t.field];return t.format!==void 0?t.format(m,u):m}const I=v(()=>({pagination:S.value,pagesNumber:ne.value,isFirstPage:he.value,isLastPage:Se.value,firstPage:_e,prevPage:qe,nextPage:Ce,lastPage:Pe,inFullscreen:s.value,toggleFullscreen:c}));function kt(){const t=l.top,u=l["top-left"],m=l["top-right"],w=l["top-selection"],_=E.value===!0&&w!==void 0&&be.value>0,T="q-table__top relative-position row items-center";if(t!==void 0)return i("div",{class:T},[t(I.value)]);let R;if(_===!0?R=w(I.value).slice():(R=[],u!==void 0?R.push(i("div",{class:"q-table__control"},[u(I.value)])):e.title&&R.push(i("div",{class:"q-table__control"},[i("div",{class:["q-table__title",e.titleClass]},e.title)]))),m!==void 0&&(R.push(i("div",{class:"q-table__separator col"})),R.push(i("div",{class:"q-table__control"},[m(I.value)]))),R.length!==0)return i("div",{class:T},R)}const Me=v(()=>Ve.value===!0?null:ct.value);function Ne(){const t=xt();return e.loading===!0&&l.loading===void 0&&t.push(i("tr",{class:"q-table__progress"},[i("th",{class:"relative-position",colspan:De.value},Le())])),i("thead",t)}function xt(){const t=l.header,u=l["header-cell"];if(t!==void 0)return t(xe({header:!0})).slice();const m=j.value.map(w=>{const _=l[`header-cell-${w.name}`],T=_!==void 0?_:u,R=xe({col:w});return T!==void 0?T(R):i(al,{key:w.name,props:R},()=>w.label)});if(ut.value===!0&&e.grid!==!0)m.unshift(i("th",{class:"q-table--col-auto-width"}," "));else if(Oe.value===!0){const w=l["header-selection"],_=w!==void 0?w(xe({})):[i(Be,{color:e.color,modelValue:Me.value,dark:f.value,dense:e.dense,"onUpdate:modelValue":je})];m.unshift(i("th",{class:"q-table--col-auto-width"},_))}return[i("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},m)]}function xe(t){return Object.assign(t,{cols:j.value,sort:we,colsMap:Fe.value,color:e.color,dark:f.value,dense:e.dense}),Oe.value===!0&&Y(t,"selected",()=>Me.value,je),t}function je(t){Ve.value===!0&&(t=!1),te(Q.value.map(n.value),Q.value,t)}const re=v(()=>{const t=[e.iconFirstPage||r.iconSet.table.firstPage,e.iconPrevPage||r.iconSet.table.prevPage,e.iconNextPage||r.iconSet.table.nextPage,e.iconLastPage||r.iconSet.table.lastPage];return r.lang.rtl===!0?t.reverse():t});function Bt(){if(e.hideBottom===!0)return;if(bt.value===!0){if(e.hideNoData===!0)return;const m=e.loading===!0?e.loadingLabel||r.lang.table.loading:e.filter?e.noResultsLabel||r.lang.table.noResults:e.noDataLabel||r.lang.table.noData,w=l["no-data"],_=w!==void 0?[w({message:m,icon:r.iconSet.table.warning,filter:e.filter})]:[i(fe,{class:"q-table__bottom-nodata-icon",name:r.iconSet.table.warning}),m];return i("div",{class:ve+" q-table__bottom--nodata"},_)}const t=l.bottom;if(t!==void 0)return i("div",{class:ve},[t(I.value)]);const u=e.hideSelectedBanner!==!0&&E.value===!0&&be.value>0?[i("div",{class:"q-table__control"},[i("div",[(e.selectedRowsLabel||r.lang.table.selectedRecords)(be.value)])])]:[];if(e.hidePagination!==!0)return i("div",{class:ve+" justify-end"},Rt(u));if(u.length>0)return i("div",{class:ve},u)}function pt(t){b({page:1,rowsPerPage:t.value})}function Rt(t){let u;const{rowsPerPage:m}=S.value,w=e.paginationLabel||r.lang.table.pagination,_=l.pagination,T=e.rowsPerPageOptions.length>1;if(t.push(i("div",{class:"q-table__separator col"})),T===!0&&t.push(i("div",{class:"q-table__control"},[i("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||r.lang.table.recordsPerPage]),i(Zt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:m,options:mt.value,displayValue:m===0?r.lang.table.allRows:m,dark:f.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":pt})])),_!==void 0)u=_(I.value);else if(u=[i("span",m!==0?{class:"q-table__bottom-item"}:{},[m?w(le.value+1,Math.min(ae.value,oe.value),oe.value):w(1,X.value,oe.value)])],m!==0&&ne.value>1){const R={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(R.size="sm"),ne.value>2&&u.push(i(J,{key:"pgFirst",...R,icon:re.value[0],disable:he.value,onClick:_e})),u.push(i(J,{key:"pgPrev",...R,icon:re.value[1],disable:he.value,onClick:qe}),i(J,{key:"pgNext",...R,icon:re.value[2],disable:Se.value,onClick:Ce})),ne.value>2&&u.push(i(J,{key:"pgLast",...R,icon:re.value[3],disable:Se.value,onClick:Pe}))}return t.push(i("div",{class:"q-table__control"},u)),t}function Tt(){const t=e.gridHeader===!0?[i("table",{class:"q-table"},[Ne()])]:e.loading===!0&&l.loading===void 0?Le():void 0;return i("div",{class:"q-table__middle"},t)}function $t(){const t=l.item!==void 0?l.item:u=>{const m=u.cols.map(_=>i("div",{class:"q-table__grid-item-row"},[i("div",{class:"q-table__grid-item-title"},[_.label]),i("div",{class:"q-table__grid-item-value"},[_.value])]));if(E.value===!0){const _=l["body-selection"],T=_!==void 0?_(u):[i(Be,{modelValue:u.selected,color:e.color,dark:f.value,dense:e.dense,"onUpdate:modelValue":(R,A)=>{te([u.key],[u.row],R,A)}})];m.unshift(i("div",{class:"q-table__grid-item-row"},T),i(Kt,{dark:f.value}))}const w={class:["q-table__grid-item-card"+k.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(w.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(w.onClick=_=>{o("RowClick",_,u.row,u.pageIndex)}),e.onRowDblclick!==void 0&&(w.onDblclick=_=>{o("RowDblclick",_,u.row,u.pageIndex)})),i("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(u.selected===!0?" q-table__grid-item--selected":"")},[i("div",w,m)])};return i("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},Q.value.map((u,m)=>t(Qe({key:n.value(u),row:u,pageIndex:m}))))}return Object.assign(d.proxy,{requestServerInteraction:P,setPagination:b,firstPage:_e,prevPage:qe,nextPage:Ce,lastPage:Pe,isRowSelected:ye,clearSelection:dt,isRowExpanded:B,setExpanded:D,sort:we,resetVirtualScroll:wt,scrollTo:St,getCellValue:U}),jt(d.proxy,{filteredSortedRows:()=>M.value,computedRows:()=>Q.value,computedRowsNumber:()=>oe.value}),()=>{const t=[kt()],u={ref:y,class:p.value};return e.grid===!0?t.push(Tt()):Object.assign(u,{class:[u.class,e.cardClass],style:e.cardStyle}),t.push(ht(),Bt()),e.loading===!0&&l.loading!==void 0&&t.push(l.loading()),i("div",u,t)}}});const ge=e=>(It("data-v-393c6c3c"),e=e(),Wt(),e),Ol=ge(()=>ee("div",{class:"text-h6"},"Request body",-1)),Vl=ge(()=>ee("div",{class:"text-h6"},"Request query params",-1)),Fl=ge(()=>ee("div",{class:"text-grey-7"},"Empty",-1)),Dl=["onClick"],Ll={key:1},El=ge(()=>ee("div",{class:"text-grey-7"},"Empty",-1)),Ql=["onClick"],Ml={key:1},Nl=["props"],jl={class:"tw-inline-flex tw-items-center tw-w-[100%]"},Al=At({__name:"LogsPage",setup(e){const l=el(),o=F([]),d=F(""),r=F(!1),f=F(""),s=F(!1),c=F(!1),n=F({sortBy:"",descending:!1,page:1,rowsPerPage:20,rowsNumber:0}),y=[{name:"entity",required:!0,label:"Entity",align:"left",field:"entity",sortable:!0},{name:"url",align:"left",style:"min-width: 10rem",label:"URL",field:"url",sortable:!0},{name:"method",align:"left",style:"min-width: 10rem",label:"Method",field:"method",sortable:!0},{name:"query",align:"left",style:"min-width: 10rem",label:"Query",field:"query",sortable:!0},{name:"body",align:"left",style:"min-width: 10rem",label:"Body",field:"body",sortable:!0},{name:"status",align:"left",style:"min-width: 5rem; max-width: 5rem",label:"Status",field:"status",sortable:!0},{name:"statusCode",align:"left",style:"min-width: 5rem; max-width: 5rem",label:"Status code",field:"statusCode",sortable:!0},{name:"errorDescription",align:"left",style:"min-width: 10rem",label:"Error description",field:"errorDescription",sortable:!0},{name:"user",align:"left",style:"min-width: 10rem",label:"User",field:h=>{var P;return(P=h.userId)==null?void 0:P.username},sortable:!0},{name:"date",align:"left",style:"min-width: 10rem",label:"Date",field:"date",sortable:!0,format:h=>`${new Date(h).toLocaleString()}`}],a=F([]);y.forEach((h,P)=>{a.value.push({value:"",name:y[P].name})}),$e(async()=>{await g(n.value.page-1)});const g=async h=>{var X,Q;c.value=!0;const P={relation:"member"};let b=!1;const q={};a.value.forEach(E=>{E.value&&(E.name!=="user"?q[E.name]={ilike:E.value}:q.user=E.value,b=!0)});let B;n.value.sortBy&&(B={},n.value.sortBy==="user"?B["member.username"]=n.value.descending?-1:1:B[n.value.sortBy]=n.value.descending?-1:1);const D={skip:h*n.value.rowsPerPage,limit:n.value.rowsPerPage,include:P,order:B,where:b?q:void 0},me={include:P,order:n.value.sortBy?`${n.value.sortBy} ${n.value.descending?"DESC":"ASC"}`:void 0,where:b?q:void 0};let M=await Ue.get(`/audits?filter=${JSON.stringify(D,void 0,"")}`);M.status===200&&(o.value=M.data),M=await Ue.get(`/audits/count?filter=${JSON.stringify(me,void 0,"")}`),M.status===200&&(n.value.rowsNumber=(X=M.data)!=null&&X.count?(Q=M.data)==null?void 0:Q.count:0),c.value=!1},k=async h=>{var P,b,q,B,D;(P=h.pagination)!=null&&P.page&&(n.value={page:h.pagination.page,rowsPerPage:h.pagination.rowsPerPage?(b=h.pagination)==null?void 0:b.rowsPerPage:10,descending:h.pagination.descending?(q=h.pagination)==null?void 0:q.descending:!1,rowsNumber:h.pagination.rowsNumber?(B=h.pagination)==null?void 0:B.rowsNumber:1,sortBy:h.pagination.sortBy?(D=h.pagination)==null?void 0:D.sortBy:"desc"},await g(h.pagination.page-1))},x=async h=>{n.value.sortBy=h,n.value.descending=!1,await g(n.value.page-1)},p=async()=>{n.value.descending?n.value.sortBy="":n.value.descending=!0,await g(n.value.page-1)},C=h=>{d.value=h,r.value=!0},S=h=>{f.value=h,s.value=!0};return N(()=>a.value,async()=>{await g(n.value.page-1)},{deep:!0}),(h,P)=>(L(),H("div",{class:Ht({"tower-max-size":We(l).screen.gt.lg,"tower-max-size-sm":!We(l).screen.gt.lg})},[O(Ie,{modelValue:r.value,"onUpdate:modelValue":P[0]||(P[0]=b=>r.value=b)},{default:$(()=>[O(Je,null,{default:$(()=>[O(ue,null,{default:$(()=>[Ol]),_:1}),O(ue,{class:"fullWordWrap tw-overflow-auto tw-max-w-[80vw] tw-max-h-[70vh]"},{default:$(()=>[Ke(ce(d.value),1)]),_:1}),O(Ge,{align:"right"},{default:$(()=>[Xe(O(J,{flat:"",label:"Close",color:"secondary"},null,512),[[Ye]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(Ie,{modelValue:s.value,"onUpdate:modelValue":P[1]||(P[1]=b=>s.value=b)},{default:$(()=>[O(Je,null,{default:$(()=>[O(ue,null,{default:$(()=>[Vl]),_:1}),O(ue,null,{default:$(()=>[Ke(ce(f.value),1)]),_:1}),O(Ge,{align:"right"},{default:$(()=>[Xe(O(J,{flat:"",label:"Close",color:"secondary"},null,512),[[Ye]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O($l,{flat:"",rows:o.value,columns:y,"row-key":"id",dense:"","rows-per-page-options":[5,10,15,20,25,50],class:"tower-sticky-header-table",pagination:n.value,"onUpdate:pagination":P[3]||(P[3]=b=>n.value=b),color:"secondary",onRequest:k,loading:c.value},{"body-cell-query":$(b=>[b.value?(L(),W(de,{key:1,props:b},{default:$(()=>[b.value.length>50?(L(),H("div",{key:0,class:"tw-font-bold tw-cursor-pointer tw-underline",onClick:q=>S(b.value)}," Show query params ",8,Dl)):(L(),H("div",Ll,ce(b.value),1))]),_:2},1032,["props"])):(L(),W(de,{key:0,props:b},{default:$(()=>[Fl]),_:2},1032,["props"]))]),"body-cell-body":$(b=>[b.value?(L(),W(de,{key:1,props:b},{default:$(()=>[b.value.length>50?(L(),H("div",{key:0,class:"tw-font-bold tw-cursor-pointer tw-underline",onClick:q=>C(b.value)}," Show body ",8,Ql)):(L(),H("div",Ml,ce(b.value),1))]),_:2},1032,["props"])):(L(),W(de,{key:0,props:b},{default:$(()=>[El]),_:2},1032,["props"]))]),header:$(b=>[O(ll,{props:b},{default:$(()=>[(L(!0),H(zt,null,Ut(b.cols,(q,B)=>(L(),H("th",{key:q.name,props:b},[ee("div",jl,[O(Jt,{filled:"",dense:"",color:"secondary",class:"tw-flex-grow tw-mr-1",modelValue:a.value[B].value,"onUpdate:modelValue":D=>a.value[B].value=D,debounce:100,label:q.label},null,8,["modelValue","onUpdate:modelValue","label"]),n.value.sortBy===q.name?(L(),W(fe,{key:0,name:n.value.descending?"sym_o_arrow_downward":"sym_o_arrow_upward",size:"sm",class:"tw-cursor-pointer",onClick:P[2]||(P[2]=D=>p())},null,8,["name"])):(L(),W(fe,{key:1,name:"sym_o_sort_by_alpha",size:"sm",onClick:D=>x(q.name),color:"grey-7",class:"tw-cursor-pointer"},null,8,["onClick"]))])],8,Nl))),128))]),_:2},1032,["props"])]),_:1},8,["rows","pagination","loading"])],2))}});var la=tl(Al,[["__scopeId","data-v-393c6c3c"]]);export{la as default};
