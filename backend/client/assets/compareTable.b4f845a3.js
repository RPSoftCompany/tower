import{Q as V,a as N,d as O}from"./index.es6.db79449e.js";import{E as U,x as I,d as Q,o as a,aa as r,H as o,ac as f,ad as b,c as T,w as m,a9 as p,a as d,aX as X,aT as J,aU as K,Q as S,a5 as c,a8 as M,I as Y,aG as B,a4 as P,a7 as k,aN as Z,aO as ee}from"./index.d78f815c.js";import{Q as te}from"./QSeparator.ac17e27e.js";import{a as z,C as L,v as R,Q as se}from"./constantVariable.1ceb2543.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";const W=n=>(Z("data-v-4c238fec"),n=n(),ee(),n),re=W(()=>o("div",{class:"tw-text-sm tw-font-semibold tw-self-center tw-text-center"}," Variable names ",-1)),ne=["id"],oe={key:1,class:"tw-flex tw-justify-center tw-self-center"},le={class:"tw-self-center"},ie={class:"tw-flex-grow tw-flex tw-justify-center"},ce={class:"tw-text-center tw-text-gray-600 tw-font-light tw-text-xs"},de={key:0,class:"tw-font-medium"},ue={class:"tw-self-center tw-flex tw-ml-3"},ve={class:"tw-self-center"},fe={class:"tw-text-center tw-self-center fullWordWrap"},we=W(()=>o("span",null,null,-1)),ge={key:0,class:"tw-italic tw-text-gray-500 tw-self-center"},he={key:0,class:"tw-text-negative tw-line-through"},_e={key:1,class:"tw-text-positive"},me={key:2},pe={key:1,class:"tw-self-center"},ye={key:2,class:"tw-self-center"},be=U({__name:"compareTable",props:{variables:null,configs:null,showDiff:{type:Boolean},filter:null},emits:["removeConfiguration","versionChanged","switchPlaces"],setup(n,{emit:x}){const u=n,g=I("-1"),w=I(!1),C=I(null),j=Q(()=>{var l;if(!u.filter)return u.variables;const t=u.filter.toLowerCase();return(l=u.variables)==null?void 0:l.filter(v=>{if(u.configs){if(v.toLowerCase().includes(t))return!0;let e=!1;for(let s of u.configs)if(s.configuration&&s.configuration[s.version].variables){const _=h(v,s.configuration[s.version].variables);if(z(_,L.STRING).toLowerCase().includes(t)){e=!0;break}}return e}})}),F=Q(()=>{if(C.value&&u.configs&&u.configs.length>0){const t=C.value;return t.scrollHeight>t.clientHeight}return!1}),h=(t,l)=>{const v=l.find(e=>e.name===t);if(v)return z(v.value,L.STRING)},G=t=>{x("removeConfiguration",t)},H=(t,l)=>O(l,t),$=(t,l)=>{x("versionChanged",{configId:t,version:l})},q=t=>{w.value=!0,g.value=t.target.id},E=t=>{w.value=!1,t.preventDefault(),x("switchPlaces",{sourceId:g.value,targetId:t.target.id})},A=t=>{t.target.id&&t.target.id!==g.value&&t.preventDefault()};return(t,l)=>{var v;return a(),r(f,null,[o("div",{class:P([`tw-grid-cols-${((v=n.configs)==null?void 0:v.length)*2+1} ${k(F)?"tw-mr-[0.65rem]":""}`,"tw-grid"])},[re,(a(!0),r(f,null,b(n.configs,e=>(a(),T(B,{id:e.id,key:e.id,draggable:n.configs.length>1,class:"tw-bg-darkPage tw-text-secondary tw-self-center tw-text-center tw-text-sm tw-font-semibold tw-min-h-[3.5rem] tw-col-span-2",flat:"",square:"",onDragend:l[0]||(l[0]=s=>w.value=!1),onDragstart:q,onDrop:E},{default:m(()=>[w.value?(a(),r("div",{key:0,id:e.id,class:"tw-absolute dropCover",onDragover:A},null,40,ne)):p("",!0),d(V,{showing:e.loading},{default:m(()=>[d(N,{color:"secondary",size:"2rem"})]),_:2},1032,["showing"]),e.loading?p("",!0):(a(),r("div",oe,[X(t.$slots,"header",J(K(e)),()=>{var s,_,i,y;return[o("div",le,[d(S,{disable:e.version<=0,class:"tw-flex-none",flat:"",icon:"sym_o_chevron_left",padding:"sm",onClick:D=>$(e.id,e.version-1)},null,8,["disable","onClick"])]),o("div",ie,[o("div",null,[o("div",null,c(e.path),1),o("div",null," Version #"+c(e.version+1)+", created "+c(e.configuration[e.version].effectiveDate),1),o("div",ce,[M(" created by "),(_=(s=e.configuration[e.version])==null?void 0:s.createdBy)!=null&&_.username?(a(),r("span",de,c((y=(i=e.configuration[e.version])==null?void 0:i.createdBy)==null?void 0:y.username),1)):p("",!0)])]),o("div",ue,[d(te,{inset:"",size:"md",vertical:""}),d(S,{flat:"",padding:"0.25rem"},{default:m(()=>[d(Y,{name:"sym_o_close",size:"sm",onClick:D=>G(e.id)},null,8,["onClick"])]),_:2},1024)])]),o("div",ve,[d(S,{disable:e.version>=e.configuration.length-1,class:"tw-flex-none",flat:"",icon:"sym_o_chevron_right",padding:"sm",onClick:D=>$(e.id,e.version+1)},null,8,["disable","onClick"])])]},!0)]))]),_:2},1032,["id","draggable"]))),128))],2),o("div",{ref_key:"contentRef",ref:C,class:P([`tw-grid-cols-${n.configs.length*2+1}`,"tw-grid tower-max-height"])},[(a(!0),r(f,null,b(k(j),e=>(a(),r(f,{key:e},[o("div",fe,c(e),1),(a(!0),r(f,null,b(n.configs,(s,_)=>(a(),T(se,{key:s.id,class:"tw-col-span-2 tw-min-h-[2rem] tower-compareTableIntersection",transition:"fade"},{default:m(()=>[d(B,{class:"tw-bg-darkPage tw-text-center fullWordWrap tw-justify-center tw-flex tw-h-full",flat:"",square:""},{default:m(()=>[d(V,{showing:s.loading||w.value&&g.value===`${s.id}`},{default:m(()=>[we]),_:2},1032,["showing"]),!s.loading&&!(w.value&&g.value===`${s.id}`)?(a(),r(f,{key:0},[h(e,s.configuration[s.version].variables)===void 0?(a(),r("div",ge," Variable doesn't exist in this version ")):_>0?(a(),r(f,{key:1},[n.showDiff?(a(!0),r(f,{key:0},b(H(k(R)(h(e,s.configuration[s.version].variables)),k(R)(h(e,n.configs[0].configuration[n.configs[0].version].variables))),(i,y)=>(a(),r("div",{key:`${i.value}_${y}`,class:"tw-self-center"},[i.removed?(a(),r("span",he,c(i.value),1)):i.added?(a(),r("span",_e,c(i.value),1)):(a(),r("span",me,c(i.value),1))]))),128)):(a(),r("div",pe,c(h(e,s.configuration[s.version].variables)),1))],64)):w.value&&g.value===`${s.id}`?p("",!0):(a(),r("div",ye,c(h(e,s.configuration[s.version].variables)),1))],64)):p("",!0)]),_:2},1024)]),_:2},1024))),128))],64))),128))],2)],64)}}});var $e=ae(be,[["__scopeId","data-v-4c238fec"]]);export{$e as C};
