import{d as C,b as $,x as b,k as I,n as N,h as m,T as A,f as z,K as H,L as O,M as D,m as K,j as k,N as L,O as E,D as M,P as V,p,R as U,e as F,i as j,l as W,g as G}from"./index.d78f815c.js";const J={ratio:[String,Number]};function X(e,f){return C(()=>{const r=Number(e.ratio||(f!==void 0?f.value:void 0));return isNaN(r)!==!0&&r>0?{paddingBottom:`${100/r}%`}:null})}const Y=16/9;var ee=$({name:"QImg",props:{...J,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Y},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:f,emit:r}){const l=b(e.initialRatio),g=X(e,l);let i=null,u=!1;const o=[b(null),b(x())],s=b(0),h=b(!1),y=b(!1),q=C(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),Q=C(()=>({width:e.width,height:e.height})),n=C(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),v=C(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));I(()=>S(),P);function S(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function x(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function P(t){i!==null&&(clearTimeout(i),i=null),y.value=!1,t===null?(h.value=!1,o[s.value^1].value=x()):h.value=!0,o[s.value].value=t}function w({target:t}){u!==!0&&(i!==null&&(clearTimeout(i),i=null),l.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,a(t,1))}function a(t,B){u===!0||B===1e3||(t.complete===!0?c(t):i=setTimeout(()=>{i=null,a(t,B+1)},50))}function c(t){u!==!0&&(s.value=s.value^1,o[s.value].value=null,h.value=!1,y.value=!1,r("load",t.currentSrc||t.src))}function d(t){i!==null&&(clearTimeout(i),i=null),h.value=!1,y.value=!0,o[s.value].value=null,o[s.value^1].value=x(),r("error",t)}function _(t){const B=o[t].value,T={key:"img_"+t,class:n.value,style:v.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...B};return s.value===t?(T.class+=" q-img__image--waiting",Object.assign(T,{onLoad:w,onError:d})):T.class+=" q-img__image--loaded",m("div",{class:"q-img__container absolute-full",key:"img"+t},m("img",T))}function R(){return h.value!==!0?m("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},z(f[y.value===!0?"error":"default"])):m("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},f.loading!==void 0?f.loading():e.noSpinner===!0?void 0:[m(H,{color:e.spinnerColor,size:e.spinnerSize})])}return P(S()),N(()=>{u=!0,i!==null&&(clearTimeout(i),i=null)}),()=>{const t=[];return g.value!==null&&t.push(m("div",{key:"filler",style:g.value})),y.value!==!0&&(o[0].value!==null&&t.push(_(0)),o[1].value!==null&&t.push(_(1))),t.push(m(A,{name:"q-transition--fade"},R)),m("div",{class:q.value,style:Q.value,role:"img","aria-label":e.alt},t)}}}),te=$({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:f,emit:r}){const l=k(),g=b(null);let i=0;const u=[];function o(n){const v=typeof n=="boolean"?n:e.noErrorFocus!==!0,S=++i,x=(a,c)=>{r("validation"+(a===!0?"Success":"Error"),c)},P=a=>{const c=a.validate();return typeof c.then=="function"?c.then(d=>({valid:d,comp:a}),d=>({valid:!1,comp:a,err:d})):Promise.resolve({valid:c,comp:a})};return(e.greedy===!0?Promise.all(u.map(P)).then(a=>a.filter(c=>c.valid!==!0)):u.reduce((a,c)=>a.then(()=>P(c).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return S===i&&x(!0),!0;if(S===i){const{comp:c,err:d}=a[0];if(d!==void 0&&console.error(d),x(!1,c),v===!0){const _=a.find(({comp:R})=>typeof R.focus=="function"&&L(R.$)===!1);_!==void 0&&_.comp.focus()}}return!1})}function s(){i++,u.forEach(n=>{typeof n.resetValidation=="function"&&n.resetValidation()})}function h(n){n!==void 0&&E(n);const v=i+1;o().then(S=>{v===i&&S===!0&&(e.onSubmit!==void 0?r("submit",n):n!==void 0&&n.target!==void 0&&typeof n.target.submit=="function"&&n.target.submit())})}function y(n){n!==void 0&&E(n),r("reset"),M(()=>{s(),e.autofocus===!0&&e.noResetFocus!==!0&&q()})}function q(){V(()=>{if(g.value===null)return;const n=g.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||g.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||g.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(g.value.querySelectorAll("[tabindex]"),v=>v.tabIndex>-1);n!=null&&n.focus({preventScroll:!0})})}p(U,{bindComponent(n){u.push(n)},unbindComponent(n){const v=u.indexOf(n);v>-1&&u.splice(v,1)}});let Q=!1;return O(()=>{Q=!0}),D(()=>{Q===!0&&e.autofocus===!0&&q()}),K(()=>{e.autofocus===!0&&q()}),Object.assign(l.proxy,{validate:o,resetValidation:s,submit:h,reset:y,focus:q,getValidationComponents:()=>u}),()=>m("form",{class:"q-form",ref:g,onSubmit:h,onReset:y},z(f.default))}}),ne=$({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:f}){const{proxy:{$q:r}}=k(),l=j(W,F);if(l===F)return console.error("QPage needs to be a deep child of QLayout"),F;if(j(G,F)===F)return console.error("QPage needs to be child of QPageContainer"),F;const i=C(()=>{const o=(l.header.space===!0?l.header.size:0)+(l.footer.space===!0?l.footer.size:0);if(typeof e.styleFn=="function"){const s=l.isContainer.value===!0?l.containerHeight.value:r.screen.height;return e.styleFn(o,s)}return{minHeight:l.isContainer.value===!0?l.containerHeight.value-o+"px":r.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":r.screen.height-o+"px"}}),u=C(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>m("main",{class:u.value,style:i.value},z(f.default))}});export{ne as Q,ee as a,te as b};
